<% layout('./layouts/boilerplate') %>

<div>
  <div class="row">
    <div class="col-6">
      <div class="card mb-3">
        <img src="<%= camp.image%>" class="card-img-top" alt="..." />
        <div class="card-body">
          <h5 class="card-title"><%= camp.title%></h5>
          <p class="card-text"><%= camp.description%></p>
        </div>
        <ul class="list-group list-group-flush">
          <li class="list-group-item text-muted"><%= camp.location%></li>
          <li class="list-group-item">$<%= camp.price%>/night</li>
        </ul>
        <div class="card-body">
          <a class="card-link btn btn-info text-light" href="/camps/<%=camp._id%>/update">Edit</a>
          <form class="d-inline" action="/camps/<%=camp._id%>?_method=DELETE" method="POST">
            <button class="btn btn-danger">Delete</button>
          </form>
        </div>
        <div class="card-footer text-muted">2 days ago</div>
      </div>
      </div>
      <!-- Creating reviews -->
      <div class="col-6">
        <div class="mb-3">
            <h4>Leave a review</h4>
            <form
              action="/camps/<%= camp.id %>/reviews"
              class="mb-3 needs-validation"
              novalidate
              method="POST"
            >
              <div class="mb-3">
                <label class="form-label" for="rating">Rating</label>
                <input
                  class="form-range"
                  type="range"
                  min="1"
                  max="5"
                  name="review[rating]"
                  value="3"
                  id="rating"
                  required
                />
                <div class="valid-feedback">Thanks for rate</div>
                <div class="invalid-feedback">How can you rate your experience</div>
              </div>
              <div class="mb-3">
                <label class="form-label" for="reviewbody">Review</label>
                <textarea
                  class="form-control"
                  placeholder="Share your emotions"
                  name="review[body]"
                  id="reviewbody"
                  cols="30"
                  rows="3"
                  required
                ></textarea>
                <div class="valid-feedback">Nice review</div>
                <div class="invalid-feedback">You should leave something here</div>
              </div>
              <button class="btn btn-success">Submit</button>
            </form>
        </div>
        <!-- Showing reviews -->
        <div>
              <% camp.reviews.reverse().map(review => { %>
              <div class="card mb-3">
                <div class="card-body">
                  <h6 class="card-title">Rating: <%= review.rating %></h6>
                  <hr>
                  <p class="card-text">Review: <%= review.body %></p>
                  <hr>
                  <form action="/camps/<%=camp._id%>/reviews/<%= review.id %>?_method=DELETE" method="POST">
                    <button class="btn btn-sm btn-danger">Delete</button>
                  </form>
                </div>
              </div>
              <%}); %>
        </div>
        <!--  -->
      </div>
    </div>
  </div>
</div>
